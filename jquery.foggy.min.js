// Foggy, v1.02
//
// Description: jQuery plugin for blurring page elements
// Homepage:    http://nbartlomiej.github.com/foggy
// Author:      nbartlomiej@gmail.com
(function(a){a.fn.foggy=function(b){var c=a.extend({opacity:.5,blurRadius:2,quality:16},b);var d=function(a,b,c,d){this.content=a;this.position=b;this.offset=c;this.opacity=d};d.prototype.render=function(b){a("<div/>",{html:this.content}).css({position:this.position,opacity:this.opacity,top:this.offset[0],left:this.offset[1]}).appendTo(b)};var e=function(a){this.radius=a};e.prototype.includes=function(a,b){if(Math.pow(a,2)+Math.pow(b,2)<=Math.pow(this.radius,2)){return true}else{return false}};e.prototype.points=function(){var a=[];for(var b=-this.radius;b<=this.radius;b++){for(var c=-this.radius;c<=this.radius;c++){if(this.includes(b,c)){a.push([b,c])}}}return a};return this.each(function(b,f){var g=a(f).html();a(f).html("");var h=a("<div/>",{}).css({position:"relative"});var i=a.grep((new e(c.blurRadius)).points(),function(a){return a[0]!=0||a[1]!=0});if(i.length<=c.quality){offsets=i}else{var j=i.length-c.quality;var k=[];for(var l=0;l<j;l++){k.push(Math.round(l*(i.length/j)))}offsets=a.grep(i,function(a,b){if(k.indexOf(b)>=0){return false}else{return true}})}var m=c.opacity*2/(offsets.length+1);(new d(g,"relative",[0,0],m)).render(h);a(offsets).each(function(a,b){(new d(g,"absolute",b,m)).render(h)});h.appendTo(f)})}})(jQuery)
